---
# Ergatis Component Documentation
# Extracted from source by extract_component_docs.pl
# Source: TIGR/JCVI/IGS Ergatis bioinformatics workflow system
#
# This file preserves ALL documentation, comments, parameter descriptions,
# and structural details from the original Ergatis source files.

component: rdp_classifier
extracted_at: "2026-02-19T15:39:25"
source_files:
  - rdp_classifier.config
  - rdp_classifier.xml
  - rdp_classifier.i1.xml
  - component_docs/rdp_classifier.tmpl

# Component documentation (from Ergatis web UI help template)
component_documentation: |
  <!-- component documentation -->
  <p>
      This component uses the RDP naive Bayesian rRNA classifier to generate an automatic 
      taxonomic assignment for each of the input nucleotide sequences, which are assumed to 
      be small subunit ribosomal RNA (ss-rRNA) sequences.
  </p>
  
  <h3>IMPORTANT: READ THIS BEFORE RUNNING RDP CLASSIFIER</h3>
  <p>
      The speed of the RDP classifier is highly dependent on the Java interpreter/compiler used 
      to run it.  For example, one set of ~3500 short test sequences had the following observed
      run times in different environments:
      <ul>
   	<li>Java 1.4.2: ~23 minutes</li>
          <li>Java 1.6.0_02 / JIT disabled (-Xint option): ~10 minutes</li>
  	<li>Java 1.6.0_02 / JIT enabled: 16 seconds</li>
      </ul>
      Therefore before using the rdp_classifier component please ensure that the ergatis 
      <span style='font-weight: bold;'>$;JAVA_EXEC$;</span> software.config variable 
      is set to a recent high-performance Java VM (e.g., a recent 
      <a href='http://java.sun.com/javase/technologies/hotspot/'>HotSpot</a> VM).
  </p>
  
  <h3>references</h3>
  <p>
    <ul>
     <li><a href='http://www.ncbi.nlm.nih.gov/entrez/query.fcgi?db=pubmed&cmd=Retrieve&dopt=AbstractPlus&list_uids=17586664'>Wang, Q, G. M. Garrity, J. M. Tiedje, and J. R. Cole. 2007. Naive Bayesian Classifier for Rapid Assignment of rRNA Sequences into the New Bacterial Taxonomy. Appl Environ Microbiol. 73(16):5261-7.</a></li>
    </ul>
  </p>
  
  <h3>algorithm</h3>
      The RDP classifier uses a bootstrapping procedure based on matching 8-mers from the input 
      sequence against those in the training set.  See the paper for details.
  
  <h3>input</h3>
  <p>
      Like the RDP classifier itself, this component accepts EMBL, GenBank, FASTA, and multi-FASTA 
      files as input.  By default each input file will be run as a single RDP job so that, for example,
      a single input multi-FASTA file of 10,000 sequences will be run as a single RDP job on one grid
      node.  This is usually not a problem, since the classifier is extremely fast and can easily 
      classify over 10,000 sequences per minute.  If it is necessary to distribute the sequences in an
      extremely large multi-FASTA input file over multiple grid nodes, the split_multifasta component
      can be used--with the <span style='font-weight:bold;'>$;SEQS_PER_FILE$;</span> parameter set to an appropriately large 
      value--to generate a set of input files for the classifier, each of which will be run as a separate 
      grid job.  It is NOT recommended to run each input sequence separately since the overhead of 
      starting the RDP classifier (Java) process in this case will be much greater than the time spent 
      actually classifying each sequence.
  </p>
  
  <h3>implemented options</h3>
  <p>
     <ul>
      <li><span style='font-weight: bold;'>$;PROPERTY_FILE$;</span> - this option can be used to search against something other than the default database/taxonomy</li>
     </ul>
  </p>
  
  <h3>output</h3>
  <p>
      Curently the component produces output in RDP's native format.  An example of a single entry
      from the .results file is shown below:
  </p>
  <div class='code_container' style='font-family: Courier,monospace;'>
  >P19992_PROK2.18.3.4.1 reverse=false
  Root; 1.0; Bacteria; 1.0; Cyanobacteria; 1.0; Cyanobacteria; 1.0; Subsection 3; 0.6; Family 3.1; 0.6; Microcoleus; 0.27; 
  
  </div>
  <p>
      Note that in order to interpret the output of the RDP classifier one typically chooses a 
      threshold score value (e.g., 0.8) and ignores all node assignments below that threshold.
      Using a threshold of 0.8 the above result would correspond to Bacteria/Cyanobacteria/Cyanobacteria,
      ignoring everything below the second Cyanobacteria assignment.  Also note that the classifier
      will refuse to classify any sequence of less than a preset length: 200bp for version 1.0 and
      50bp for version 2.0.  See the RDP .stdout files for a list of the sequences thus disqualified.
  </p>

# Configuration file - all sections, parameters, defaults, and inline comments
config:
  interface:
    classification: phylogeny
  parameters:
    # Property file to pass to the RDP classifier.  The property file is used to specify
    # the database/taxonomy against which the classifier will search.  Leave this parameter
    # blank to use the default training data from whichever RDP classifier version is 
    # specified in the software.config file.
    # 
    PROPERTY_FILE: ""
    RDP_DIR: /usr/local/bioinf/rdp_classifier
    # Maximum memory (heap) size for the Java process running the RDP classifier.
    # The default setting should be adequate for the default training data.
    JAVA_MX: 400m
  input:
    INPUT_FILE_LIST: ""
    INPUT_FILE: ""
    INPUT_DIRECTORY: ""
    # the following is only used when iterating over an INPUT_DIRECTORY
    INPUT_EXTENSION: fsa
  output:
    OUTPUT_TOKEN: default
    OUTPUT_DIRECTORY: $;REPOSITORY_ROOT$;/output_repository/$;COMPONENT_NAME$;/$;PIPELINEID$;_$;OUTPUT_TOKEN$;
    RESULTS_OUTPUT_LIST: $;OUTPUT_DIRECTORY$;/$;COMPONENT_NAME$;.results.list
  component:
    COMPONENT_NAME: rdp_classifier
    DESCRIPTION: none
    WORKFLOW_REPOSITORY: $;REPOSITORY_ROOT$;/workflow/runtime/$;COMPONENT_NAME$;/$;PIPELINEID$;_$;OUTPUT_TOKEN$;
    PIPELINE_TOKEN: unnamed
    # The version,revision,tag here is set by an interpolated CVS tag
    VERSION: current
    RELEASE_TAG: $Name$
    REVISION: "$Revision: 4680 $"
    TEMPLATE_XML: $;DOCS_DIR$;/$;COMPONENT_NAME$;.xml
    ITERATOR1: i1
    ITERATOR1_XML: $;DOCS_DIR$;/$;COMPONENT_NAME$;.$;ITERATOR1$;.xml
    # Distributed options
    GROUP_COUNT: 150
    NODISTRIB: 0
    # the following keys are replaced at runtime by the invocation script
    COMPONENT_CONFIG: ""
    COMPONENT_XML: ""
    PIPELINE_XML: ""
    PIPELINEID: ""
  include:
    PROJECT_CONFIG: ""

# Main workflow XML template - step definitions
workflow_xml:
  xml_comments:
    - Preprocessing
    - Processing
    - Iterator
    - Postprocessing
  command_sets:
    - RDP SSU-rRNA classifier workflow
  includes:
    - "file=\"$;DOCS_DIR$;/file_iterator_template.xml\" keys=\"$;ITERATOR_NAME$;=ITERATOR1,$;ITERATOR_XML$;=ITERATOR1_XML\""
  steps:
    - name: create output directory
      type: RunUnixCommand
      executable: mkdir
      arg: -p -m 777 $;OUTPUT_DIRECTORY$;
    - name: create temp directory
      type: RunUnixCommand
      executable: mkdir
      arg: -p -m 777 $;TMP_DIR$;
    - name: create results list
      type: RunUnixCommand
      executable: $;BIN_DIR$;/create_list_file
      params:
        - key: --directory
          value: $;OUTPUT_DIRECTORY$;
        - key: --regex
          value: "\".*\\.results\""
        - key: --output_list
          value: $;RESULTS_OUTPUT_LIST$;

# Iterator i1 - per-input processing steps
iterator_i1:
  command_sets:
    - RDP SSU-rRNA classifier
  steps:
    - name: RDP classifier
      type: RunUnixCommand
      executable: $;JAVA_EXEC$;
      arg: -Xmx$;JAVA_MX$; -jar $;RDP_CLASSIFIER_JAR_FILE$; $;I_FILE_PATH$; $;OUTPUT_DIRECTORY$;/$;ITERATOR_NAME$;/g$;GROUP_NUMBER$;/$;I_FILE_BASE$;.results $;PROPERTY_FILE$;
      params:
        - key: stderr
          value: $;TMP_DIR$;/$;ITERATOR_NAME$;/g$;GROUP_NUMBER$;/$;I_FILE_BASE$;.stderr
        - key: stdout
          value: $;TMP_DIR$;/$;ITERATOR_NAME$;/g$;GROUP_NUMBER$;/$;I_FILE_BASE$;.stdout

# Perl script documentation (POD)
perl_scripts:
  - script: create_list_file.pl
    pod: |
  =head1	NAME
  
  create_list_file.pl - script to create a list of files given a certain regex
  
  =head1	SYNOPSIS
  
  USAGE: create_list_file.pl
         [  --directory|d=/path/to/some/directory/
            --output_list|o=/path/output.list
            --regex|r=string regular expression
            --include_gz|g ]
  
  =head1	OPTIONS
  
  B<--directory,-d>
  	Location of the directory to search.  No wild card characters should be
      used in the directory.
      (Default: current directory)
  
  B<--output_list,-o>
      File that will be the list of found files
      (Default: standard out)
  
  B<--regex,-r>
      Regular expression for entire file name (including full path)
      (Default: finds all files)
  
  B<--include_gz|g>
      This flag tells the script to include .gz extensions in the list
  
  B<--help,-h>
  	Prints this help message
  
  =head1	DESCRIPTION
  
      This script will search a directory for file names containing the given
      regular expression.  By default, all .gz or .gzip extensions are stripped
      off.  Programs using these list files should know to search for .gz|.gzip
      versions.
  
      **Note: No wild card characters should be used in this option.
  
  =head1	INPUT
  
      There are no required options to the script and there isn't really any
      input.  See above for defaults.  
  
  =head1	OUTPUT
  
      The script will output a list of files that match the regular expression
      given by option --regex|-r. If no output file is given, this script will 
      print out to standard out.  
  
  =head1	CONTACT
  
      Kevin Galens
      kgalens@tigr.org
