---
# Ergatis Component Documentation
# Extracted from source by extract_component_docs.pl
# Source: TIGR/JCVI/IGS Ergatis bioinformatics workflow system
#
# This file preserves ALL documentation, comments, parameter descriptions,
# and structural details from the original Ergatis source files.

component: mepipe
extracted_at: "2026-02-19T15:39:25"
source_files:
  - workflow/mepipe-master.ini
  - workflow/mepipe.ini
  - workflow/mepipeconf.ini

# Workflow INI: mepipe-master.ini
workflow_ini_mepipe-master.ini:
  create_bsml_list:
    param.command: $;BIN_DIR$;/create_list_file
    param.--regex: "\".*.$;NAME$;.bsml\""
    param.--directory: $;OUTPUT_DIRECTORY$;
    param.--output_list: $;OUTPUT_DIRECTORY$;/$;NAME$;.bsml.list
  create_compute_output:
    # make the output directory
    param.command: mkdir
    arg: -p -m 777 $;OUTPUT_DIRECTORY$;
  create_compute_scratch:
    # make the new scratch directory
    param.command: mkdir
    arg: -p -m 777 $;TMP_DIR$;
  create_groups_subflow1:
    param.command: $;BIN_DIR$;/generate_groups
    param.output_dir: $;WORKFLOW_REPOSITORY$;
    param.prefix: subflow1groups
    param.group_count: $;GROUP_COUNT$;
    param.file: $;WORKFLOW_REPOSITORY$;/subflow1.list
  create_iterative_subflow1:
    # create iterative subflow
    param.command: $;BIN_DIR$;/generate_subflow
    # workflow doc information
    param.template: $;WORKFLOWDOCS_DIR$;/groups-iterator_template.xml
    param.inifile: $;WORKFLOWDOCS_DIR$;/groups-iterator.ini
    param.iteratortemplate: $;WORKFLOWDOCS_DIR$;/batch-paralleliterator_template.xml
    param.iteratorini: $;WORKFLOWDOCS_DIR$;/batch-iterator.ini
    param.iteratorlist: $;WORKFLOW_REPOSITORY$;/subflow1groups.list
    param.conf: $;COMPONENT_CONFIG$;
    param.wfname: $;NAME$;
    param.nodistrib: $;NODISTRIB$;
    # output information
    param.outputdir: $;WORKFLOW_REPOSITORY$;
    param.outputxml: $;WORKFLOW_REPOSITORY$;/groups.xml
    param.debug: $;DEBUG$;
  create_iterator_list_subflow1:
    param.command: $;BIN_DIR$;/generate_input_list
    param.filelist: "'$;INPUT_FILE_LIST$;'"
    param.file: "'$;INPUT_FILE$;'"
    param.directory: "'$;INPUT_DIRECTORY$;'"
    param.extension: "'$;INPUT_EXTENSION$;'"
    param.output: $;WORKFLOW_REPOSITORY$;/subflow1.list
  create_pamlout_list:
    param.command: $;BIN_DIR$;/create_list_file
    param.--regex: "\".*.PAMLout\""
    param.--directory: $;OUTPUT_DIRECTORY$;
    param.--output_list: $;OUTPUT_DIRECTORY$;/$;NAME$;.PAMLout.list
  create_raw_list:
    param.command: $;BIN_DIR$;/create_list_file
    param.--regex: "\".*.$;NAME$;.raw\""
    param.--directory: $;OUTPUT_DIRECTORY$;
    param.--output_list: $;RAW_OUTPUT_LIST$;
  create_rst_list:
    param.command: $;BIN_DIR$;/create_list_file
    param.--regex: "\".*.rst\""
    param.--directory: $;OUTPUT_DIRECTORY$;
    param.--output_list: $;OUTPUT_DIRECTORY$;/$;NAME$;.rst.list
  empty:
  subflow1:
    fileName: $;WORKFLOW_REPOSITORY$;/groups.xml

# Workflow INI: mepipe.ini
workflow_ini_mepipe.ini:
  compress_raw_output:
    param.command: $;BIN_DIR$;/compress_file
    param.--file: $;OUTPUT_DIRECTORY$;/$;GROUP_NAME$;/$;ITER_FILE_BASE$;.$;NAME$;.raw
    param.--compress: $;COMPRESS_RAW_OUTPUT$;
    param.--list_file: $;TMP_DIR$;/$;GROUP_NAME$;/$;ITER_FILE_BASE$;.$;NAME$;.raw.list
  dtd_validation:
    # perform document schema validation
    param.command: $;BIN_DIR$;/dtdValid.pl
    param.-d: $;SCHEMA_DIR$;/bsml3_1.dtd
    arg: $;OUTPUT_DIRECTORY$;/$;GROUP_NAME$;/$;ITER_FILE_BASE$;.$;NAME$;.bsml
  empty:
  mepipe_create_tree:
    # generate tree files
    param.command: $;BIN_DIR$;/mepipe_create_tree
    param.--input_prefix: $;ITER_FILE_BASE$;
    param.--input_path: $;ITER_DIR$;
    param.--temp_path: $;TMP_DIR$;/$;GROUP_NAME$;
    param.--output_path: $;OUTPUT_DIRECTORY$;/$;GROUP_NAME$;
    param.--paup_bin_dir: /usr/local/devel/ANNOTATION/bwhitty
    param.stdout: $;OUTPUT_DIRECTORY$;/$;GROUP_NAME$;/$;ITER_FILE_BASE$;.$;NAME$;.stdout
    param.stderr: $;OUTPUT_DIRECTORY$;/$;GROUP_NAME$;/$;ITER_FILE_BASE$;.$;NAME$;.stderr
  mepipe_prepare_input:
    # prepare input files
    param.command: $;BIN_DIR$;/mepipe_prepare_input
    param.--input_prefix: $;ITER_FILE_BASE$;
    param.--input_path: $;ITER_DIR$;
    param.--temp_path: $;TMP_DIR$;/$;GROUP_NAME$;
    param.--output_path: $;OUTPUT_DIRECTORY$;/$;GROUP_NAME$;
    param.--emboss_bin_dir: /local/packages/EMBOSS/bin
    param.stdout: $;OUTPUT_DIRECTORY$;/$;GROUP_NAME$;/$;ITER_FILE_BASE$;.$;NAME$;.stdout
    param.stderr: $;OUTPUT_DIRECTORY$;/$;GROUP_NAME$;/$;ITER_FILE_BASE$;.$;NAME$;.stderr
  mepipe_run_paml_w0_1:
    # first run of paml with w=0.1
    param.command: $;BIN_DIR$;/mepipe_run_paml
    param.--input_prefix: $;ITER_FILE_BASE$;
    param.--input_path: $;ITER_DIR$;
    param.--temp_path: $;TMP_DIR$;/$;GROUP_NAME$;
    param.--output_path: $;OUTPUT_DIRECTORY$;/$;GROUP_NAME$;
    param.--paml_bin_dir: /home/bwhitty/work/components/MEPipe/bin/paml3.15/bin
    param.--dn_ds_ratio: 0.1
    param.stdout: $;OUTPUT_DIRECTORY$;/$;GROUP_NAME$;/$;ITER_FILE_BASE$;.$;NAME$;.stdout
    param.stderr: $;OUTPUT_DIRECTORY$;/$;GROUP_NAME$;/$;ITER_FILE_BASE$;.$;NAME$;.stderr
  mepipe_run_paml_w1_5:
    # second run of paml with w=1.5
    # this step will be run only if there are more than two input sequences
    param.command: $;BIN_DIR$;/mepipe_run_paml --require_more_than_two
    param.--input_prefix: $;ITER_FILE_BASE$;
    param.--input_path: $;ITER_DIR$;
    param.--temp_path: $;TMP_DIR$;/$;GROUP_NAME$;
    param.--output_path: $;OUTPUT_DIRECTORY$;/$;GROUP_NAME$;
    param.--paml_bin_dir: /home/bwhitty/work/components/MEPipe/bin/paml3.15/bin
    param.--dn_ds_ratio: 1.5
    param.stdout: $;OUTPUT_DIRECTORY$;/$;GROUP_NAME$;/$;ITER_FILE_BASE$;.$;NAME$;.stdout
    param.stderr: $;OUTPUT_DIRECTORY$;/$;GROUP_NAME$;/$;ITER_FILE_BASE$;.$;NAME$;.stderr
  store_config_params:
    # store parameters associated with analysis in bsml file
    # workflow will pass add'l optional parameters if invoked with LoggedUnixCommand
    # --command-id
    param.command: $;BIN_DIR$;/analysis2bsml
    param.--ergatis_control_file: $;ERGATIS_DIR$;.ini
    param.--conf: $;COMPONENT_CONFIG$;
    param.--bsml_file: $;OUTPUT_DIRECTORY$;/$;GROUP_NAME$;/$;ITER_FILE_BASE$;.$;NAME$;.bsml
    param.--componenturl: $;WORKFLOW_REPOSITORY$;/pipeline.xml
    param.--pipelineurl: $;REPOSITORY_ROOT$;/Workflow/pipeline/pipeline$;PIPELINEID$;.xml
    param.--analysis_id: $;NAME$;_analysis

# Workflow INI: mepipeconf.ini
workflow_ini_mepipeconf.ini:
  include mepipe:
    $;SHARED_CONFIG$;: ""
  input mepipe:
    # list of clustalw aa alignments (corresponding nt sequence fasta files must exist in the same path as each file)
    $;INPUT_FILE_LIST$;: ""
    # a single alignment file to perform analysis on (with accompanying nt sequence fasta file in same path)
    $;INPUT_FILE$;: ""
    # directory containing clustalw aa alignments and corresponding nt sequence fasta files
    $;INPUT_DIRECTORY$;: ""
    # the following is only used when iterating over an INPUT_DIRECTORY
    $;INPUT_EXTENSION$;: aln
  output mepipe:
    $;OUTPUT_TOKEN$;: default
    $;OUTPUT_DIRECTORY$;: $;REPOSITORY_ROOT$;/output_repository/$;NAME$;/$;PIPELINEID$;_$;OUTPUT_TOKEN$;
    $;RAW_OUTPUT_LIST$;: $;OUTPUT_DIRECTORY$;/$;NAME$;.raw.list
    $;COMPRESS_RAW_OUTPUT$;: 0
  workflowdocs mepipe:
    $;VERSION$;: current
    $;REVISION$;: $Revision$
    $;TAG$;: $Name$
    $;ALGORITHM$;: mepipe
    $;NAME$;: mepipe
    $;MASTER_TEMPLATE_INI$;: $;WORKFLOWDOCS_DIR$;/mepipe-master.ini
    $;MASTER_TEMPLATE_XML$;: $;WORKFLOWDOCS_DIR$;/mepipe-master_template.xml
    $;TEMPLATE_INI$;: $;WORKFLOWDOCS_DIR$;/mepipe.ini
    $;TEMPLATE_XML$;: $;WORKFLOWDOCS_DIR$;/mepipe_template.xml
    $;WORKFLOW_REPOSITORY$;: $;REPOSITORY_ROOT$;/Workflow/$;NAME$;/$;PIPELINEID$;_$;OUTPUT_TOKEN$;
    $;GROUP_COUNT$;: 150
    # the following keys are replaced at runtime by the invocation script
    $;COMPONENT_CONFIG$;: ""
    $;NODISTRIB$;: 0
