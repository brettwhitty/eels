---
# Ergatis Component Documentation
# Extracted from source by extract_component_docs.pl
# Source: TIGR/JCVI/IGS Ergatis bioinformatics workflow system
#
# This file preserves ALL documentation, comments, parameter descriptions,
# and structural details from the original Ergatis source files.

component: coverage
extracted_at: "2026-02-19T15:39:24"
source_files:
  - workflow/coverage-master.ini
  - workflow/coverage.ini
  - workflow/coverageconf.ini

# Workflow INI: coverage-master.ini
workflow_ini_coverage-master.ini:
  archive_output:
    # archive old output
    param.command: $;BIN_DIR$;/archive
    param.--file: $;TMP_DIR$;/backup.tgz
    param.--directory: $;OUTPUT_DIRECTORY$;
  copy_contig_to_temp:
    # copy the contig file to the temp directory
    param.command: cp
    arg: $;CONTIG_FILE$;
    arg: $;TMP_DIR$;/tmp.contig
  copy_qual_to_temp:
    # copy the qual file to the temp directory
    param.command: cp
    arg: $;QUAL_FILE$;
    arg: $;TMP_DIR$;/tmp.qual
  copy_seq_to_temp:
    # copy the seq file to the temp directory
    param.command: cp
    arg: $;SEQ_FILE$;
    arg: $;TMP_DIR$;/tmp.seq
  create_checksum:
    # create individual checksums
    param.command: $;BIN_DIR$;/checksum.pl
    param.-f: $;TMP_DIR$;/$;NAME$;_checksum_filelist.txt
    param.-o: $;OUTPUT_DIRECTORY$;/CHECKSUM
  create_checksum_file_list:
    # create list of files to use for checksums
    param.command: $;BIN_DIR$;/create_list_file
    param.--regex: "\"*.bsml\""
    param.--directory: $;OUTPUT_DIRECTORY$;
    param.--output_list: $;TMP_DIR$;/$;NAME$;_checksum_filelist.txt
  create_checksum_sum:
    # create checksum of CHECKSUM files
    param.command: $;BIN_DIR$;/checksum.pl
    param.-f: $;TMP_DIR$;/$;NAME$;_checksum_sum_filelist.txt
    param.-o: $;OUTPUT_DIRECTORY$;/CHECKSUM.sum
  create_checksum_sum_file_list:
    # create list of CHECKSUM files
    param.command: $;BIN_DIR$;/create_list_file
    param.--output_list: $;TMP_DIR$;/$;NAME$;_checksum_sum_filelist.txt
    param.--directory: $;OUTPUT_DIRECTORY$;
    param.--regex: "\".*\\/CHECKSUM\\/.*\""
  create_compute_output:
    # make the output directory
    param.command: mkdir
    arg: -p -m 777 $;OUTPUT_DIRECTORY$;
  create_compute_scratch:
    # make the new scratch directory
    param.command: mkdir
    arg: -p -m 777 $;TMP_DIR$;
  create_groups_subflow1:
    param.command: $;BIN_DIR$;/generate_groups
    param.output_dir: $;WORKFLOW_REPOSITORY$;
    param.prefix: subflow1groups
    param.group_count: $;GROUP_COUNT$;
    param.file: $;WORKFLOW_REPOSITORY$;/subflow1.list
  create_iterative_subflow1:
    # create iterative subflow
    param.command: $;BIN_DIR$;/generate_subflow
    # workflow doc information
    param.template: $;WORKFLOWDOCS_DIR$;/groups-iterator_template.xml
    param.inifile: $;WORKFLOWDOCS_DIR$;/groups-iterator.ini
    param.iteratortemplate: $;WORKFLOWDOCS_DIR$;/batch-paralleliterator_template.xml
    param.iteratorini: $;WORKFLOWDOCS_DIR$;/batch-iterator.ini
    param.iteratorlist: $;WORKFLOW_REPOSITORY$;/subflow1groups.list
    param.conf: $;COMPONENT_CONFIG$;
    param.wfname: $;NAME$;
    param.nodistrib: $;NODISTRIB$;
    # output information
    param.outputdir: $;WORKFLOW_REPOSITORY$;
    param.outputxml: $;WORKFLOW_REPOSITORY$;/groups.xml
    param.debug: $;DEBUG$;
  create_iterator_list_subflow1:
    param.command: $;BIN_DIR$;/generate_input_list
    param.filelist: "'$;CONTIG_LIST$;'"
    param.output: $;WORKFLOW_REPOSITORY$;/subflow1.list
  empty:
  set_output_permissions:
    # give global read/write access to the output files
    param.command: find
    arg: $;OUTPUT_DIRECTORY$;
    arg: "-type f ! -regex '.*/\\..*' -exec chmod -R 666 \\{\\} \\;"
  set_scratch_permissions:
    # give global read/write access to the scratch files
    param.command: find
    arg: $;TMP_DIR$;
    arg: "-type f ! -regex '.*/\\..*' -exec chmod -R 666 \\{\\} \\;"
  set_workflowdocs_permissions:
    param.command: find
    arg: $;WORKFLOW_REPOSITORY$;
    arg: "-type f ! -regex '.*/\\..*' -exec chmod -R 666 \\{\\} \\;"
  subflow1:
    fileName: $;WORKFLOW_REPOSITORY$;/groups.xml

# Workflow INI: coverage.ini
workflow_ini_coverage.ini:
  dtd_validation:
    # perform document schema validation
    param.command: $;BIN_DIR$;/dtdValid.pl
    param.-d: $;SCHEMA_DIR$;/bsml3_1.dtd
    arg: $;OUTPUT_DIRECTORY$;/$;SOURCE_DATABASE$;_$;ITER_FILE_BASE$;_$;NAME$;.bsml
  empty:
  getCoverage:
    # use getCoverage to generate tcov file from contig 
    param.command: /usr/local/bin/getCoverage
    arg: -t
    arg: -a $;ITER_FILE_BASE$;
    arg: -o $;TMP_DIR$;/$;ITER_FILE_BASE$;_$;NAME$;_$;ITER_FILE_BASE$;
    arg: $;TMP_DIR$;/tmp
  store_config_params:
    # store parameters associated with analysis in bsml file
    # workflow will pass add'l optional parameters if invoked with LoggedUnixCommand
    # --command-id
    param.command: $;BIN_DIR$;/analysis2bsml
    param.--ergatis_control_file: $;ERGATIS_DIR$;.ini
    param.--conf: $;COMPONENT_CONFIG$;
    param.--bsml_file: $;OUTPUT_DIRECTORY$;/$;SOURCE_DATABASE$;_$;ITER_FILE_BASE$;_$;NAME$;.bsml
    param.--analysis_id: $;NAME$;_analysis
  tcov2bsml:
    # encode tcov data into bsml
    param.command: $;BIN_DIR$;/tcov2bsml
    param.--tcov: $;TMP_DIR$;/$;ITER_FILE_BASE$;_$;NAME$;_$;ITER_FILE_BASE$;.tcov
    param.--database: $;SOURCE_DATABASE$;
    param.--bsml_repository_path: $;BSML_REPOSITORY$;
    param.--output: $;OUTPUT_DIRECTORY$;/$;SOURCE_DATABASE$;_$;ITER_FILE_BASE$;_$;NAME$;.bsml
    param.--chunk_size: $;COVERAGE_SEQ_SIZE$;

# Workflow INI: coverageconf.ini
workflow_ini_coverageconf.ini:
  _header:
    # configuration file for the coverage workflow
  include coverage:
    $;SHARED_CONFIG$;: ""
  input coverage:
    $;CONTIG_FILE$;: ""
    $;SEQ_FILE$;: ""
    $;QUAL_FILE$;: ""
    $;CONTIG_LIST$;: ""
    $;SOURCE_DATABASE$;: ""
    $;BSML_REPOSITORY$;: $;REPOSITORY_ROOT$;/BSML_repository
  output coverage:
    $;OUTPUT_TOKEN$;: default
    $;OUTPUT_DIRECTORY$;: $;REPOSITORY_ROOT$;/BSML_repository/$;NAME$;/$;PIPELINEID$;_$;OUTPUT_TOKEN$;
  parameters coverage:
    $;COVERAGE_SEQ_SIZE$;: 1000
  workflowdocs coverage:
    # The version here is set by an interpolated CVS tag
    $;VERSION$;: $Name$
    $;REVISION$;: $Revision$
    $;TAG$;: $Name$
    $;NAME$;: coverage
    $;MASTER_TEMPLATE_INI$;: $;WORKFLOWDOCS_DIR$;/coverage-master.ini
    $;MASTER_TEMPLATE_XML$;: $;WORKFLOWDOCS_DIR$;/coverage-master_template.xml
    $;TEMPLATE_INI$;: $;WORKFLOWDOCS_DIR$;/coverage.ini
    $;TEMPLATE_XML$;: $;WORKFLOWDOCS_DIR$;/coverage_template.xml
    $;WORKFLOW_REPOSITORY$;: $;REPOSITORY_ROOT$;/Workflow/$;NAME$;/$;PIPELINEID$;_$;OUTPUT_TOKEN$;
    $;GROUP_COUNT$;: 150
    # the following keys are replaced at runtime by the invocation script
    $;COMPONENT_CONFIG$;: ""
    $;NODISTRIB$;: 0
