---
# Ergatis Component Documentation
# Extracted from source by extract_component_docs.pl
# Source: TIGR/JCVI/IGS Ergatis bioinformatics workflow system
#
# This file preserves ALL documentation, comments, parameter descriptions,
# and structural details from the original Ergatis source files.

component: cogs
extracted_at: "2026-02-19T15:39:24"
source_files:
  - workflow/cogs-master.ini
  - workflow/cogs.ini
  - workflow/cogsconf.ini

# Workflow INI: cogs-master.ini
workflow_ini_cogs-master.ini:
  best_hit:
    # generate the cog clusters
    param.command: $;BIN_DIR$;/best_hit
    arg: -i $;TMP_DIR$;/$;DATABASE$;.$;WFID$;.btab -j $;JACCARD_CUTOFF$;
    param.stdout: $;TMP_DIR$;/$;DATABASE$;.$;WFID$;.cog
    param.stderr: $;TMP_DIR$;/besthit.stderr
    dceSpec.os: linux
  bsml2cogbtab:
    # generate btab file from Bsml Repository
    param.command: $;BIN_DIR$;/CogBsmlLoader
    param.--bsmlSearchList: $;WORKFLOW_REPOSITORY$;/match.input.list
    param.--bsmlModelList: $;WORKFLOW_REPOSITORY$;/asmbl.input.list
    param.--bsmlJaccardList: "'$;JACCARD_OUTPUT_LIST$;'"
    param.--outfile: $;TMP_DIR$;/$;DATABASE$;.$;WFID$;.btab
    param.--pvalcut: $;PVALCUT$;
    param.stdout: $;TMP_DIR$;/bsml2cogbtab.stdout
    param.stderr: $;TMP_DIR$;/bsml2cogbtab.stderr
    dceSpec.os: linux
  cogs2fasta:
    # generate FASTA input for clustal
    param.command: $;BIN_DIR$;/CogProteinFasta
    param.--cogFile: $;TMP_DIR$;/$;DATABASE$;.$;WFID$;.cog
    param.--bsmlModelList: $;WORKFLOW_REPOSITORY$;/asmbl.input.list
    param.--outputDir: $;OUTPUT_DIRECTORY$;
    param.--maxCogSeqCount: $;MAX_MULTI_ALIGNMENT$;
    param.stdout: $;TMP_DIR$;/cogs2fasta.stdout
    param.stderr: $;TMP_DIR$;/cogs2fasta.stderr
    dceSpec.os: linux
  create_compute_output:
    # make the output directory
    param.command: mkdir
    arg: -p -m 777 $;OUTPUT_DIRECTORY$;
  create_compute_scratch:
    # make the new scratch directory
    param.command: mkdir
    arg: -p -m 777 $;TMP_DIR$;
  empty:
  generate_asmbl_input:
    param.command: $;BIN_DIR$;/generate_input_list
    param.filelist: "'$;QUERY_BSML_FILE_LIST$;'"
    param.file: "'$;QUERY_BSML_FILE$;'"
    param.directory: "'$;QUERY_BSML_DIRECTORY$;'"
    param.output: $;WORKFLOW_REPOSITORY$;/asmbl.input.list
    arg: --listfiles
  generate_match_input:
    param.command: $;BIN_DIR$;/generate_input_list
    param.filelist: "'$;MATCH_BSML_FILE_LIST$;'"
    param.file: "'$;MATCH_BSML_FILE$;'"
    param.directory: "'$;MATCH_BSML_DIRECTORY$;'"
    param.output: $;WORKFLOW_REPOSITORY$;/match.input.list
    arg: --listfiles
  merge_fasta_list_files:
    param.command: find
    arg: "$;OUTPUT_DIRECTORY$; -name '*.fsa' > $;FASTA_OUTPUT_LIST$;"

# Workflow INI: cogs.ini
workflow_ini_cogs.ini:
  clustalw:
    # run clustalw analysis
    param.command: /usr/local/bin/clustalw
    param.-output: gcg
    param.-infile: $;FASTA_FILE$;
    param.-outfile: $;TMP_DIR$;/$;GROUP_NAME$;/$;NAME$;_$;ITER_FILE_BASE$;.clw
  create_bsml_list:
    param.command: echo
    arg: "\"$;OUTPUT_DIRECTORY$;/$;GROUP_NAME$;/$;ITER_FILE_BASE$;.$;NAME$;.bsml\""
    param.stdout: $;TMP_DIR$;/$;GROUP_NAME$;/$;ITER_FILE_BASE$;.$;NAME$;.bsml.list
  dtd_validation:
    # perform document schema validation
    param.command: $;BIN_DIR$;/dtdValid.pl
    param.-d: $;SCHEMA_DIR$;/bsml3_1.dtd
    arg: $;OUTPUT_DIRECTORY$;/$;GROUP_NAME$;/$;ITER_FILE_BASE$;_$;NAME$;.bsml
  empty:
  msf2bsml:
    # encode the clustal output to BSML
    param.command: $;BIN_DIR$;/MSF2Bsml
    param.--msffile: $;TMP_DIR$;/$;GROUP_NAME$;/$;NAME$;_$;ITER_FILE_BASE$;.clw
    param.--output: $;OUTPUT_DIRECTORY$;/$;GROUP_NAME$;/$;ITER_FILE_BASE$;.$;NAME$;.bsml
  store_config_params:
    # store parameters associated with analysis in bsml file
    # workflow will pass add'l optional parameters if invoked with LoggedUnixCommand
    # --command-id
    param.command: $;BIN_DIR$;/analysis2bsml
    param.--ergatis_control_file: $;ERGATIS_DIR$;.ini
    param.--conf: $;COMPONENT_CONFIG$;
    param.--bsml_file: $;OUTPUT_DIRECTORY$;/$;GROUP_NAME$;/$;ITER_FILE_BASE$;.$;NAME$;.bsml
    param.--componenturl: $;WORKFLOW_REPOSITORY$;/pipeline.xml
    param.--pipelineurl: $;REPOSITORY_ROOT$;/Workflow/pipeline/pipeline$;PIPELINEID$;.xml
    param.--analysis_id: $;NAME$;_analysis

# Workflow INI: cogsconf.ini
workflow_ini_cogsconf.ini:
  _header:
    # configuration file for the Cogs workflow
  include cogs:
    $;SHARED_CONFIG$;: ""
  input cogs:
    $;QUERY_BSML_FILE_LIST$;: ""
    $;QUERY_BSML_FILE$;: ""
    $;QUERY_BSML_DIRECTORY$;: ""
    $;MATCH_BSML_FILE_LIST$;: ""
    $;MATCH_BSML_FILE$;: ""
    $;MATCH_BSML_DIRECTORY$;: ""
    # List of BSML output files generated by clustalw component for a jaccard run
    $;JACCARD_OUTPUT_LIST$;: ""
  output cogs:
    $;OUTPUT_TOKEN$;: default
    $;OUTPUT_DIRECTORY$;: $;REPOSITORY_ROOT$;/output_repository/$;NAME$;/$;PIPELINEID$;_$;OUTPUT_TOKEN$;
    $;FASTA_OUTPUT_LIST$;: $;OUTPUT_DIRECTORY$;/$;NAME$;.fsa.list
  parameters cogs:
    $;PVALCUT$;: 1e-5
    $;MAX_MULTI_ALIGNMENT$;: 30
    # Jaccard coefficient cutoff for pruning edges from generated clusters - should be a value between 0 and 1, inclusive
    $;JACCARD_CUTOFF$;: 0.0
  workflowdocs cogs:
    # The version here is set by an interpolated CVS tag
    $;VERSION$;: $Name$
    $;REVISION$;: $Revision$
    $;TAG$;: $Name$
    $;NAME$;: cogs
    $;MASTER_TEMPLATE_INI$;: $;WORKFLOWDOCS_DIR$;/cogs-master.ini
    $;MASTER_TEMPLATE_XML$;: $;WORKFLOWDOCS_DIR$;/cogs-master_template.xml
    $;TEMPLATE_INI$;: $;WORKFLOWDOCS_DIR$;/cogs.ini
    $;TEMPLATE_XML$;: $;WORKFLOWDOCS_DIR$;/cogs_template.xml
    $;WORKFLOW_REPOSITORY$;: $;REPOSITORY_ROOT$;/Workflow/$;NAME$;/$;PIPELINEID$;_$;OUTPUT_TOKEN$;
    $;GROUP_COUNT$;: 150
    # the following keys are replaced at runtime by the invocation script
    $;COMPONENT_CONFIG$;: ""
    $;NODISTRIB$;: 0
