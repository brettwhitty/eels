---
# Ergatis Component Documentation
# Extracted from source by extract_component_docs.pl
# Source: TIGR/JCVI/IGS Ergatis bioinformatics workflow system
#
# This file preserves ALL documentation, comments, parameter descriptions,
# and structural details from the original Ergatis source files.

component: tiling
extracted_at: "2026-02-19T15:39:25"
source_files:
  - workflow/tiling-master.ini
  - workflow/tilingconf.ini

# Workflow INI: tiling-master.ini
workflow_ini_tiling-master.ini:
  bsml_encoding:
    # run tiling2bsml
    param.command: $;BIN_DIR$;/tiling2bsml
    param.--tilingPath: $;OUTPUT_DIRECTORY$;/show_tiling.out
    param.--outFile: $;OUTPUT_DIRECTORY$;/tiling.bsml
    # use user-inputted as opposed to temp masked version
    param.--referencePath: $;REFERENCE_FILE$;
    param.--queryPath: $;QUERY_FILE$;
    param.--reference_class: $;REFERENCE_CLASS$;
    param.--query_class: $;QUERY_CLASS$;
    param.--analysis_id: $;NAME$;_analysis
    param.--gzip_output: $;COMPRESS_BSML_OUTPUT$;
  create_bsml_list:
    param.command: $;BIN_DIR$;/create_list_file
    param.--regex: "\".*.$;NAME$;.bsml\""
    param.--directory: $;OUTPUT_DIRECTORY$;
    param.--output_list: $;BSML_OUTPUT_LIST$;
  create_compute_output:
    # make the output directory
    param.command: mkdir
    arg: -p -m 777 $;OUTPUT_DIRECTORY$;
  create_compute_scratch:
    # make the scratch space
    param.command: mkdir
    arg: -p -m 777 $;TMP_DIR$;
  dtd_validation:
    # perform document schema validation
    param.command: $;BIN_DIR$;/dtdValid.pl
    param.-d: $;SCHEMA_DIR$;/bsml3_1.dtd
    # arg=$;OUTPUT_DIRECTORY$;/$;GROUP_NAME$;/$;ITER_FILE_BASE$;.$;NAME$;.bsml
    arg: $;OUTPUT_DIRECTORY$;/tiling.bsml
  empty:
  fasta_masker_query:
    # mask non-ATGC nucleotides otherwise nucmer is dumb
    param.command: $;BIN_DIR$;/fasta_masker
    arg: -i $;QUERY_FILE$; -o $;TMP_DIR$;/masked_query.fsa -m
  fasta_masker_reference:
    # mask non-ATGC nucleotides otherwise nucmer is dumb
    param.command: $;BIN_DIR$;/fasta_masker
    arg: -i $;REFERENCE_FILE$; -o $;TMP_DIR$;/masked_reference.fsa -m
  nucmer:
    # run nucmer
    param.command: /usr/local/common/nucmer
    # nucmer  [options]  <Reference>  <Query>
    # -p|prefix       Set the prefix of the output files (default "out")
    arg: -p $;OUTPUT_DIRECTORY$;/nucmer $;TMP_DIR$;/masked_reference.fsa $;TMP_DIR$;/masked_query.fsa
  show_tiling:
    # run show tiling
    param.command: /usr/local/common/show-tiling
    arg: -c -v $;TILING_COVERAGE_THRESHOLD$; -i $;TILING_PERCENT_IDENTITY$; -g $;TILING_MAXIMUM_GAP$; $;OUTPUT_DIRECTORY$;/nucmer.delta
    param.stdout: $;OUTPUT_DIRECTORY$;/show_tiling.out
  store_config_params:
    # store parameters associated with analysis in bsml file
    # workflow will pass add'l optional parameters if invoked with LoggedUnixCommand
    # --command-id
    param.command: $;BIN_DIR$;/analysis2bsml
    param.--ergatis_control_file: $;ERGATIS_DIR$;.ini
    param.--conf: $;COMPONENT_CONFIG$;
    # param.--bsml_file=$;OUTPUT_DIRECTORY$;/$;GROUP_NAME$;/$;ITER_FILE_BASE$;.$;NAME$;.bsml
    param.--bsml_file: $;OUTPUT_DIRECTORY$;/tiling.bsml
    param.--componenturl: $;WORKFLOW_REPOSITORY$;/pipeline.xml
    param.--pipelineurl: $;REPOSITORY_ROOT$;/Workflow/pipeline/pipeline$;PIPELINEID$;.xml
    param.--analysis_id: $;NAME$;_analysis

# Workflow INI: tilingconf.ini
workflow_ini_tilingconf.ini:
  _header:
    # notes on tiling component:
    # - Negative start coords occur when tiles "wrap" around origin
    # - Any tiling subsumed by another tiling will not show up in output
    # configuration file for the tiling workflow
  include tiling:
    $;SHARED_CONFIG$;: ""
  input tiling:
    # nucmer  [options]  -Reference aka Scaffold-  -Query aka Contigs-
    # both in fasta format
    $;REFERENCE_FILE$;: ""
    $;QUERY_FILE$;: ""
    # class= attributes for the reference and query inputs
    $;REFERENCE_CLASS$;: supercontig
    $;QUERY_CLASS$;: contig
  output tiling:
    $;OUTPUT_TOKEN$;: default
    # $;OUTPUT_DIRECTORY$; = $;REPOSITORY_ROOT$;/BSML_repository/$;NAME$;
    $;OUTPUT_DIRECTORY$;: $;REPOSITORY_ROOT$;/output_repository/$;NAME$;/$;PIPELINEID$;_$;OUTPUT_TOKEN$;
    $;BSML_OUTPUT_LIST$;: $;OUTPUT_DIRECTORY$;/$;NAME$;.bsml.list
    $;COMPRESS_BSML_OUTPUT$;: 0
  parameters tiling:
    # -v float      Set minimum contig coverage to tile [0.0, 100.0]
    # (nucmer default = 95.0) sum of individual alignments
    # (promer default = 50.0) extent of syntenic region
    $;TILING_COVERAGE_THRESHOLD$;: 100
    # -i float      Set minimum percent identity to tile [0.0, 100.0]
    # (nucmer default = 90.0)
    # (promer default = 55.0)
    $;TILING_PERCENT_IDENTITY$;: 100
    # -g int        Set maximum gap between clustered alignments [-1, INT_MAX]
    # A value of -1 will represent infinity
    # (nucmer default = 1000)
    # (promer default = -1)
    $;TILING_MAXIMUM_GAP$;: 1000
  workflowdocs tiling:
    $;VERSION$;: $Name$
    $;REVISION$;: $Revision$
    $;TAG$;: $Name$
    $;NAME$;: tiling
    $;MASTER_TEMPLATE_INI$;: $;WORKFLOWDOCS_DIR$;/tiling-master.ini
    $;MASTER_TEMPLATE_XML$;: $;WORKFLOWDOCS_DIR$;/tiling-master_template.xml
    $;WORKFLOW_REPOSITORY$;: $;REPOSITORY_ROOT$;/Workflow/$;NAME$;/$;PIPELINEID$;_$;OUTPUT_TOKEN$;
    $;GROUP_COUNT$;: 400
    # the following keys are replaced at runtime by the invocation script
    $;COMPONENT_CONFIG$;: ""
    $;NODISTRIB$;: 0
