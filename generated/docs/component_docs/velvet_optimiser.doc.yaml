---
# Ergatis Component Documentation
# Extracted from source by extract_component_docs.pl
# Source: TIGR/JCVI/IGS Ergatis bioinformatics workflow system
#
# This file preserves ALL documentation, comments, parameter descriptions,
# and structural details from the original Ergatis source files.

component: velvet_optimiser
extracted_at: "2026-02-19T15:39:25"
source_files:
  - velvet_optimiser.config
  - velvet_optimiser.xml

# Configuration file - all sections, parameters, defaults, and inline comments
config:
  interface:
    classification: assembly
  parameters:
    # Location of velvet
    VELVET_PATH: $;VELVET_INSTALL_DIR$;
    START_HASH_LENGTH: 19
    END_HASH_LENGTH: 31
    OTHER_OPTIMISER_OPTS: -a yes
  input:
    # Only accepts fasta or fastq. Make sure paired end sequences have
    # been run through shuffleSequences.pl (provided by velvet) before
    # or use prepare_paired_end_for_velvet component. For multiple inputs
    # of the same type, make a comma separated list.
    SHORT_PAIRED: ""
    LONG_PAIRED: ""
    SHORT: ""
    LONG: ""
  output:
    OUTPUT_TOKEN: default
    OUTPUT_DIRECTORY: $;REPOSITORY_ROOT$;/output_repository/$;COMPONENT_NAME$;/$;PIPELINEID$;_$;OUTPUT_TOKEN$;
    # $;SEQUENCE_OUTPUT_LIST$;=$;OUTPUT_DIRECTORY$;/$;COMPONENT_NAME$;.sequences.list
    # $;ROADMAP_OUTPUT_LIST$;=$;OUTPUT_DIRECTORY$;/$;COMPONENT_NAME$;.roadmaps.list
    CONTIG_OUTPUT_LIST: $;OUTPUT_DIRECTORY$;/$;COMPONENT_NAME$;.fa.list
  component:
    COMPONENT_NAME: velvet_optimiser
    DESCRIPTION: none
    WORKFLOW_REPOSITORY: $;REPOSITORY_ROOT$;/workflow/runtime/$;COMPONENT_NAME$;/$;PIPELINEID$;_$;OUTPUT_TOKEN$;
    PIPELINE_TOKEN: unnamed
    # The version,revision,tag here is set by an interpolated CVS tag
    VERSION: $Name$
    RELEASE_TAG: $Name$
    REVISION: "$Revision: 5801 $"
    TEMPLATE_XML: $;DOCS_DIR$;/$;COMPONENT_NAME$;.xml
    # Distributed options
    NODISTRIB: 0
    # the following keys are replaced at runtime by the invocation script
    COMPONENT_CONFIG: ""
    COMPONENT_XML: ""
    PIPELINE_XML: ""
    PIPELINEID: ""
  include:
    PROJECT_CONFIG: ""

# Main workflow XML template - step definitions
workflow_xml:
  xml_comments:
    - Preprocessing
    - Processing
  command_sets:
    - velvet workflow
  steps:
    - name: create output directory
      type: RunUnixCommand
      executable: mkdir
      arg: -p -m 777 $;OUTPUT_DIRECTORY$;
    - name: create temp directory
      type: RunUnixCommand
      executable: mkdir
      arg: -p -m 777 $;TMP_DIR$;
    - name: run velvet optimiser
      type: RunDistributedCommand
      executable: $;BIN_DIR$;/run_velvet_optimiser
      params:
        - key: --shortPaired
          value: "&quot;$;SHORT_PAIRED$;&quot;"
        - key: --short
          value: "&quot;$;SHORT$;&quot;"
        - key: --longPaired
          value: "&quot;$;LONG_PAIRED$;&quot;"
        - key: --long
          value: "&quot;$;LONG$;&quot;"
        - key: --output_directory
          value: $;OUTPUT_DIRECTORY$;
        - key: --log
          value: $;OUTPUT_DIRECTORY$;/run_velvet_optimser.log
        - key: --velvet_path
          value: $;VELVET_PATH$;
        - key: --start_hash_length
          value: $;START_HASH_LENGTH$;
        - key: --end_hash_length
          value: $;END_HASH_LENGTH$;
        - key: --other_optimiser_opts
          value: "&apos;$;OTHER_OPTIMISER_OPTS$;&apos;"
        - key: --output_list
          value: $;CONTIG_OUTPUT_LIST$;
        - key: stderr
          value: $;OUTPUT_DIRECTORY$;/$;COMPONENT_NAME$;.stderr
        - key: stdout
          value: $;OUTPUT_DIRECTORY$;/$;COMPONENT_NAME$;.stdout

# Perl script documentation (POD)
perl_scripts:
  - script: run_velvet_optimiser.pl
    pod: |
  =head1 NAME
  
  run_velvet_optimiser.pl - Eragtis wrapper script for running Velvet Optimiser.
  
  =head1 SYNOPSIS
  
   USAGE: run_velvet_optimiser.pl
         --shortPaired=/path/to/file.list
         --longPaired=/path/to/file.list
         --short=/path/to/file.list
         --long=/path/to/file.list
         --velvet_path=/abs/path/to/velvet_dir
         --start_hash_length=17
         --end_hash_length=31
         --other_optimiser_opts='-a yes'
         --output_directory=/path/to/out
         --output_list=/path/to/contig.fa.list
       [ --log=/path/to/file.log
         --debug=3
         --help
       ]
  
  =head1 OPTIONS
  
  B<--shortPaired,-sp>
  
  B<--longPaired,-lp>
  
  B<--short,-s>
  
  B<--long,-l>
  
  B<--velvet_path,-p>
      Absolute directory of where the velvet executables are held
  
  B<--file_format,-f>
      Can be one of the following:
      [-fasta|-fastq|-fasta.gz|-fastq.gz|-eland|-gerald]
  
  B<--read_type,-r>
      Can be one of the following:
      [-short|-shortPaired|-short2|-shortPaired2|-long|-longPaired]
  
  B<--start_hash_length,-a>
      The hash length (or kmer) for the first iteration of velvet.
      Must be an odd number
  
  B<--end_hash_length,-e>
      The hash length (or kmer) for the last iteration of velvet
      Must be an odd number
  
  B<--other_optimiser_opts,-o>
      Right now, should only be -a yes.  But will be passed directly
      into the executable. So don't break things and such.
  
  B<--output_directory,-O>
      Directory to write output
  
  B<--output_list,-u>
      The path to the list file which will contain the full path
      to the contigs.fa produced by velvet.  Optional; if not provided,
      no list will be made.
  
  B<--log,-L>
      Logfile.
  
  B<--debug,-d>
      1,2 or 3. Higher values more verbose.
  
  B<--help,-h>
      Print this message
  
  =head1  DESCRIPTION
  
      Will take in an input file and run velvet optimiser.
   
  =head1  INPUT
      Anything valid that velvet can handle.
  
  =head1 OUTPUT
  
  =head1  CONTACT
  
      Kevin Galens
      kgalens@gmail.com
