# Converter Reference Guide

## Overview

This document catalogs the 91 converter scripts that transform tool output into BSML format for Chado database loading. These converters represent institutional knowledge of how to parse and standardize bioinformatics tool output.

## Converter Categories

### Alignment Tools (BLAST family)
- **blast2bsml.pl** - WU-BLAST output (blastn, blastp, blastx, tblastn, tblastx)
- **ncbi-blast converters** - NCBI BLAST+ output
- Handles HSP filtering, P-value thresholds, molecule type mapping

### Gene Prediction
- **glimmer32bsml.pl** - Prokaryotic gene prediction, handles circular molecules
- **augustus2bsml.pl** - Eukaryotic gene prediction
- **prodigal2bsml.pl** - Prokaryotic gene prediction (Prodigal v2.50+)
- **genemark2bsml.pl** - GeneMark gene prediction
- **fgenesh2bsml.pl** - FGENESH eukaryotic gene prediction

### Protein Domain/Motif
- **hmmpfam2bsml.pl** - HMMer2 protein domain search
- **hmmpfam32bsml.pl** - HMMer3 protein domain search (hmmscan)
- **iprscan2bsml.pl** - InterProScan integrated domain search
- **prosite2bsml.pl** - PROSITE pattern/profile search

### RNA Genes
- **aragorn2bsml.pl** - tRNA and tmRNA prediction
- **tRNAscan2bsml.pl** - tRNA prediction
- **RNAmmer2bsml.pl** - rRNA prediction
- **infernal2bsml.pl** - ncRNA prediction (Rfam)

### Signal/Localization
- **signalp2bsml.pl** - Signal peptide prediction
- **targetp2bsml.pl** - Subcellular localization
- **tmhmm2bsml.pl** - Transmembrane helix prediction
- **lipop2bsml.pl** - Lipoprotein signal peptide

### Repeat/Low Complexity
- **repeatmasker2bsml.pl** - Repeat masking
- **trf2bsml.pl** - Tandem repeat finder
- **seg2bsml.pl** - Low complexity regions

### Comparative Genomics
- **nucmer2bsml.pl** - Whole genome alignment (MUMmer)
- **promer2bsml.pl** - Translated genome alignment
- **aat2bsml.pl** - AAT alignment tool

## Common Patterns

### Standard Options
Most converters share these options:
- `--input, -i` - Raw tool output
- `--output, -o` - BSML output file
- `--id_repository, -r` - ID generator repository
- `--fasta_input, -a` - Original FASTA input
- `--log, -l` - Log file
- `--debug, -d` - Debug level
- `--gzip_output, -g` - Compress output

### Dependencies
Common Perl modules:
- BSML::BsmlBuilder - BSML document construction
- BSML::BsmlRepository - BSML document management
- Ergatis::IdGenerator - Unique ID generation
- Ergatis::Logger - Logging
- Bio::SearchIO - BioPerl parsing (for alignment tools)
- Chado::Gene - Gene model representation

### Processing Flow
1. Parse tool-specific output format
2. Extract features/alignments/predictions
3. Map to BSML elements (Sequence, Feature, Alignment)
4. Generate unique IDs via Ergatis::IdGenerator
5. Add analysis metadata
6. Write BSML XML
7. Validate XML structure
8. Optionally compress output

## BSML Structure

### Core Elements
- **Sequence** - Genomic sequences (query/subject)
- **Feature** - Genes, exons, domains, etc.
- **Seq-pair-alignment** - Pairwise alignments
- **Seq-pair-run** - HSPs/alignment segments
- **Analysis** - Tool metadata and parameters

### Coordinate Systems
- Zero-based coordinates (BSML/Chado standard)
- Strand information (+1, -1)
- Circular molecule handling (negative coordinates for wraparound)
- Phase information for CDS features

## Workflow Integration

### Typical Component Flow
```
tool_executable [params] > raw_output
converter.pl --input raw_output --output bsml_output [options]
bsml2chado.pl --input bsml_output [database options]
```

### Iterator Pattern
Converters run in parallel via component iterators:
- One converter instance per input file
- GROUP_COUNT controls parallelization
- Results aggregated via list files

## Database Loading

### bsml2chado Pipeline
1. BSML files generated by converters
2. Aggregated into lists
3. Loaded into Chado database via bsml2chado component
4. Validation and integrity checks
5. Analysis tracking and provenance

## Converter Development

### Creating New Converters
1. Parse tool output format
2. Map to appropriate BSML elements
3. Handle edge cases (empty results, circular molecules, etc.)
4. Generate valid XML IDs
5. Add analysis metadata
6. Validate output
7. Document input/output formats

### Best Practices
- Use BioPerl parsers when available
- Handle empty result sets gracefully
- Preserve original IDs in title attributes
- Validate XML before writing
- Log parsing errors
- Support gzip compression
- Use Ergatis::IdGenerator for IDs

## Historical Context

These converters represent 20+ years of production genomics annotation at TIGR/JCVI/IGS. They encode:
- Tool output format knowledge
- Biological feature semantics
- Database schema mappings
- Edge case handling
- Performance optimizations

## Related Documentation
- `BSML_SCHEMA.md` - BSML XML structure
- `COMPONENT_ANATOMY.md` - Component structure
- `CHADO_INTEGRATION.md` - Database loading
- Individual converter docs in `docs/converters/`

## Converter List

See `data/converter_catalog.json` for complete structured metadata on all 91 converters.
