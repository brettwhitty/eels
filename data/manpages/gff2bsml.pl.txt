GFF2BSML(1)                                                                User Contributed Perl Documentation                                                               GFF2BSML(1)

NAME
       gff32bsml.pl - Convert GFF3 annotation data into BSML.

SYNOPSIS
       gff32bsml.pl
                --input=/path/to/annotation.gff3
                --output=/path/to/results.bsml
                --project=rca1
                --id_repository=/usr/local/projects/rca1/workflow/project_id_repository
                --organism='Aspergillus nidulans'
               [--peptide_fasta=/path/to/peptide-seqs.fsa
                --peptide_id_regex='^>(\S+)'
                --peptide_id_prefix=''
                --peptide_id_suffix='-Protein'
                --peptide_no_seqdata
                --dna_fasta=/path/to/dna-seqs.fsa
                --dna_id_regex='^>(\S+)'
                --dna_id_prefix='Chr'
                --dna_id_suffix=''
                --dna_no_seqdata
                --gene_type=gene
                --organism_genetic_code=1
                --organism_mt_genetic_code=4
                --use_cds_parent_ids
                --insert_missing_mrnas
                --insert_missing_exons
                --insert_polypeptides
                --inserted_polypeptide_id_type=CDS
                --default_seq_class=assembly
                --default_seq_attributes='SO:contig'
                --feat_attribute_mappings='Name:gene_product_name,comment:comment'
                --clone_feat_attribute_mappings='gene:gene_product_name:transcript,gene:gene_product_name:CDS'
                --feat_xref_mappings='ID:mydb:accession,Name:mydb:pub_locus'
                --clone_feat_xref_mappings='gene:NCBILocus:transcript,gene:NCBILocus:CDS'
                --seq_xref_mappings='ID:mydb:seq_id'
                --atts_with_unescaped_commas='ID,Name'
                --allow_genes_with_no_cds
                --sofa_type_mappings='transcript=>CDS,ORF=>gene'
                --log=/path/to/some.log
                --debug=4
                --help
                --man ]

OPTIONS
       --input, -g
           path to the input GFF file.

       --peptide_fasta, -e
           optional.  path to a multi-FASTA file containing the polypeptides for the genes in the GFF file.
           if this argument is supplied then the named file _must_ contain all the sequences for the
           polypeptide/protein features in the input GFF file, _except_ those that appear in the ##FASTA
           section of the GFF file.

       --peptide_id_regex
           optional.  regular expression used to parse peptide unique id from FASTA deflines in --peptide_fasta
           and the FASTA section of the GFF file itself.  in the latter case, the regular expression must NOT
           match any non-peptide ids, otherwise --peptide_id_prefix and --peptide_id_suffix may be misapplied.
           default = ^>(\S+)

       --peptide_id_prefix
           optional. prefix to prepend to the id parsed by --peptide_id_regex to produce the polypeptide ID
           used by the corresponding GFF feature.

       --peptide_id_suffix
           optional. suffix to append to the id parsed by --peptide_id_regex to produce the polypeptide ID
           used by the corresponding GFF feature.

       --peptide_no_seqdata
           do not create Seq-data or Seq-data-import entries for the polypeptide sequences; use --peptide_fasta,
           if specified, only to determine the sequence length(s).

       --dna_fasta
           optional.  path to a multi-FASTA file containing the DNA sequences for the reference sequences
           in the GFF file.  if this argument is supplied then the named file _must_ contain all of the
           sequences for the genomic sequence features in the input GFF file, _except_ those that appear
           in the ##FASTA section of the GFF file.

       --dna_id_regex
           optional.  regular expression used to parse the sequence unique id from FASTA deflines in
           --dna_fasta and the FASTA section of the GFF file itself.  in the latter case, the regular
           expression must NOT match any non-peptide ids, otherwise --dna_id_prefix and --dna_id_suffix
           may be misapplied..   default = ^>(\S+)

       --dna_id_prefix
           optional. prefix to prepend to the id parsed by --dna_id_regex to produce the sequence ID
           used by the corresponding GFF feature.

       --dna_id_suffix
           optional. suffix to append to the id parsed by --dna_id_regex to produce the sequence ID
           used by the corresponding GFF feature.

       --dna_no_seqdata
           do not create Seq-data or Seq-data-import entries for the DNA/reference sequences; use --dna_fasta,
           if specified, or the sequences present in the GFF file, only to determine the sequence length(s).

       --gene_type
           optional.  specifies a SO type in the input GFF file that should be replaced with "gene".  this can
           be used to handle nonstandard inputs in which, for example, the term "match" is used as the parent
           of one or more CDS features (e.g., as in GeneWise GFF output)  Note that the SO types _are_
           case-sensitive.

       --organism_genetic_code
           optional.  specifies a genetic code value to appear in the BSML <Organism> element for --organism
           see http://www.ncbi.nlm.nih.gov/Taxonomy/Utils/wprintgc.cgi?mode=c#SG1 for values

       --organism_mt_genetic_code
           optional.  specifies a mitochondrial genetic code value to appear in the BSML <Organism> element
           for --organism.  see http://www.ncbi.nlm.nih.gov/Taxonomy/Utils/wprintgc.cgi?mode=c#SG1 for values

       --output, -o
           output BSML file (which should not exist before running the script.)

       --project, -p
           project/database name used to create unique feature identifiers.

       --id_repository, -i
           path to the Ergatis project_id_repository for the current project.

       --organism, -r
           organism to place in the BSML <Genomes> section.  the first word will be used as the BSML genus,
           and the rest of the string will be placed in the BSML species attribute.

       --use_cds_parent_ids,-c
           optional.  whether to use the GFF parent id to identify CDS features that lack an ID of their own.

       --insert_missing_mrnas
           optional.  automatically insert missing mRNA features wherever they are missing from the GFF
           (i.e., anytime a CDS feature is found hanging directly off a gene feature)

       --insert_missing_exons
           optional.  automatically inserts missing exon features in any gene model that does not have _any_
           exons but does have CDS features.  in this case a single exon will be created to exactly span each
           CDS.

       --insert_polypeptides
           optional.  automatically inserts a polypeptide feature in any gene model that has one or more CDS
           features but no polypeptide feature.

       --inserted_polypeptide_id_type
           optional. specifies which feature ('CDS', 'gene', 'transcript', or 'mRNA') the newly-inserted
           polypeptide ids should be based on (default = 'gene')  the id of the new polypeptide will be
           formed by taking the GFF id of the corresponding named feature and appending "-Protein"
           Note that "transcript" and "mRNA" are synonymous for the purposes of this option.

       --default_seq_class,-e
           optional.  default sequence class/SO type (e.g., 'assembly', 'supercontig') to use for sequences
           for which the type cannot be parsed from the GFF file.

       --default_seq_attributes,-e
           optional.  comma-delimited list of BSML attributes (in colon-delimited key:value form) to associate
           with each genomic sequence in the GFF file.

       --feat_attribute_mappings
           optional.  a comma-delimited list of GFF attribute -> BSML Attribute mappings, each of which is
           defined by a source (GFF) attribute name and a target (BSML) attribute name, separated by a colon,
           for example "Name:gene_product_name" will take each BSML 'Name' value and insert it into the
           BSML document as an <Attribute> with name="Name" and content=the corresponding GFF attribute value.
           Any embedded colons may be escaped with a backslash ("\:")

       --clone_feat_attribute_mappings
           optional.  a comma-delimited list of colon-separated values.  each member of the list is a colon-
           separated triplet that contains 1. a source SOFA type, 2. a BSML attribute name, and 3. a target
           SOFA type.  e.g., "gene:gene_product_name:CDS,gene:gene_product_name:transcript"  This particular
           example specifies that--within each gene model/feature group--any gene_product_name BSML Attributes
           attached to the gene feature will be copied over to the associated transcript and CDS features
           (without introducing duplicate attribute values).  This cloning/copying is done _after_ any applicable
           --feat_attribute_mappings have been processed for all of the involved features.

       --feat_xref_mappings,-x
           optional.  a comma-delimited list of GFF attribute -> BSML Cross-reference mappings, each of which
           is defined by a set of 3 values separated by colons, as in 'ID:mydb:accession', which specifies
           that each BSML 'ID' value should be inserted into the BSML document as a <Cross-reference>
           element with database="mydb" and identifier-type="accession" (and identifier set to the ID value.)
           Any embedded colons may be escaped with a backslash ("\:")

       --clone_feat_xref_mappings
           optional.  behaves similarly to --clone_feat_attribute_mappings, but copying BSML <Cross-references>
           instead of <Attributes>

       --seq_xref_mappings
           optional.  identical to --xref_mappings except that it defines cross-reference mappings for the
           reference _sequences_ in the GFF files (i.e., those things whose IDs appear in GFF column 1)
           in the case where the sequences are not themselves defined as GFF features the only attribute for
           which a mapping may be specified is 'ID'.

       --atts_with_unescaped_commas
           optional.  a comma-delimited list of GFF3 attributes whose values (incorrectly) contain unescaped
           commas.  instead of parsing these values as comma-delimited lists the program will treat each as
           a single value and will parse it as though the commas embedded in the value had been correctly
           URL-escaped.

       --allow_genes_with_no_cds
           optional.  normally the script expects that any non-protein-coding gene will either: 1. be assigned
           an explicit SO type of 'pseudogene' instead of 'gene' or 2. have a non-coding RNA SO type at the
           transcript level (e.g., ncRNA, tRNA, etc.)  therefore if the script is running with --insert_polypeptides
           and finds a gene for which neither of these things are true, it will fail with an error if the gene
           lacks a CDS.  use this flag to permit the conversion to continue with a warning instead.

       --sofa_type_mappings
           optional.  a comma-delimited list of SOFA id or name mappings, in the form id1=>id2 or name1=>name2.
           each occurrence of id1 or name1 in the GFF3 SOFA feature type column (GFF3 column #3) will be
           replaced by id2/name2 prior to performing any subsequent parsing.  this option can be useful for
           making a GFF3 file more closely match the canonical gene encoding.  for example, if a GFF3 file
           uses the term "ORF" instead of "gene" it can be rectified by specifying
           --sofa_type_mappings='ORF=>gene'

       --log,-l
           optional.  path to a log file the script should create.  will be overwritten if
           it already exists.

       --debug,-d
           optional.  the debug level for the logger (an integer)

       --help,-h
           print usage/help documentation

       --man,-m
           print detailed usage/help documentation

DESCRIPTION
       This script parses a single GFF input file containing annotation data (for one or more genomic sequences) and writes it out as a BSML document that can be subsequently fed into
       bsml2chado to load it into a Chado database.  This script was originally created by copying and then generalizing Brett Whitty's evmgff32bsml.pl utility.

INPUT
       A single GFF input file.  See the GFF documentation for more details.  Note that the script has a number of options that allow it to correctly parse/convert a variety of GFF-
       format files, even those that may deviate from the official specification in one way or another.

OUTPUT
       A single BSML document.  See the BSML documentation for more details.

CONTACT
           Jonathan Crabtree
           jonathancrabtree@gmail.com

perl v5.22.1                                                                           2017-11-14                                                                            GFF2BSML(1)
